<header>
  <h1>
    {{ data ? data.name.first_name + ' ' + data.name.last_name : name }}
  </h1>
  <div class="actions">
    <button mat-icon-button matTooltip="LÃ¶schen">
      <mat-icon>delete</mat-icon>
    </button>
  </div>
</header>
<div class="body">
  <div class="loading" *ngIf="isLoading">
    <mat-spinner diameter="32"></mat-spinner>
  </div>

  <mat-tree
    [dataSource]="nestedDataSource"
    [treeControl]="nestedTreeControl"
    class="data-tree"
  >
    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
      <li class="mat-tree-node single-node" [attr.level]="node.level">
        <button mat-icon-button disabled></button>
        <span class="key">{{ node.name }}</span>
        <span class="value" [class.null]="node.value == null">{{
          node.value == null ? 'null' : node.value
        }}</span>
        <span class="type">({{ node.type || 'Null' }})</span>
      </li>
    </mat-tree-node>

    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
      <li>
        <div
          class="mat-tree-node nested-note"
          [attr.level]="node.level"
          matTreeNodeToggle
        >
          <button
            mat-icon-button
            disableRipple
            [attr.aria-label]="'toggle ' + node.name"
            class="expand"
          >
            <mat-icon [class.expanded]="nestedTreeControl.isExpanded(node)">
              arrow_right
            </mat-icon>
          </button>
          <span
            class="key"
            [class.hide-colon]="nestedTreeControl.isExpanded(node)"
            >{{ node.name }}</span
          >
          <span class="preview" *ngIf="!nestedTreeControl.isExpanded(node)">{{
            node.preview
          }}</span>
          <span class="type">({{ node.type || 'Null' }})</span>
        </div>
        <ul
          class="child-note"
          [class.array]="node.type == 'Liste'"
          [class.invisible]="!nestedTreeControl.isExpanded(node)"
        >
          <ng-container matTreeNodeOutlet></ng-container>
        </ul>
      </li>
    </mat-nested-tree-node>
  </mat-tree>
</div>
